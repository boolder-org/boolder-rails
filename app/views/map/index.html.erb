<% if @area %> 
  <% set_meta_tags title: t("views.map.area.metas.title", area: @area.name) %>
  <% set_meta_tags description: t("views.map.area.metas.description", area: @area.name) %>

  <% if @area.cover.persisted? %>
  <% set_meta_tags og: { type: "website", image: url_for(@area.cover.variant(:medium)) } %>
  <% end %>
  <% set_meta_tags canonical: map_url(@area) %>
<% else %>
  <% set_meta_tags title: t("views.map.fontainebleau.metas.title") %>
  <% set_meta_tags description: t("views.map.fontainebleau.metas.description") %>
  <% set_meta_tags og: { type: "website", image: image_url("map-og.png") } %>
  <% set_meta_tags canonical: map_url %>
<% end %>

<div 
data-controller="mapbox"
data-action="gotoproblem@window->mapbox#gotoproblem gotoarea@window->mapbox#gotoarea"
class="flex-auto relative"
id='map'
data-mapbox-target="map"
data-mapbox-locale-value="<%= I18n.locale %>"

<% if @problem %> 
data-mapbox-problem-value="<%= @problem.to_json %>" 
<% end %>

<% if @bounds %> 
data-mapbox-bounds-value="<%= @bounds.to_json %>"
<% end %>

<% if Rails.env.production? %> 
  data-mapbox-token-value="pk.eyJ1Ijoibm1vbmRvbGxvdCIsImEiOiJjbDl5bDZkdDIwNmhhM3BsbnJqbWprcnl5In0.qTno2zICtJfl6UJnNAdmZQ"
<% else %> 
  data-mapbox-draft-value="true"
  data-mapbox-token-value="pk.eyJ1Ijoibm1vbmRvbGxvdCIsImEiOiJjbGE5dTBoYjQwMWpqM3JxbWJxeDBtcTd0In0.ZL6a2hHTBJmk4-_MHuUfHg"
<% end %>
>
  <%= render "filters" %>

</div>