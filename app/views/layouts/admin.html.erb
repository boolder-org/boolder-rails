<!doctype html>
<html>
  <head>
    <title>Boolder</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_pack_tag 'application', 'data-turbo-track': 'reload' %>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <%= javascript_pack_tag 'application', 'data-turbo-track': 'reload' %>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script>
      // This code uses custom events coming from search_controller.js
      // FIXME: make code more robust
      let locale = "<%= I18n.locale %>";
      window.addEventListener('gotoproblem', function(event) {
        window.location = `/${locale}/admin/problems/${event.detail.id}/edit`
      });
      // FIXME: redirect to correct url (area slug)
      // window.addEventListener('gotoarea', function(event) {
      //   window.location = `/${locale}/admin/...`
      // });
    </script>
  </head>

  <body class="bg-gray-100">

<div>
  <nav class="bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center w-full ">
          <div class="hidden md:block w-full ">
            <div class="flex justify-between w-full ">
              <div class="flex items-center space-x-4">
                <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                <%= link_to root_path, class: "text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" do %>
                  <%= image_tag 'logo.svg', class: "h-8 w-auto", alt:"Boolder admin" %>
                <% end %>

                <%= link_to "Areas", admin_areas_path, class: "text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" %>

                <%= link_to "Moderation", admin_moderation_path, class: "text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" %>

                <!-- <%= link_to "Pois", admin_pois_path, class: "text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" %> -->

                <div class="relative" data-controller="dropdown">
                  <div class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer"  data-action="click->dropdown#toggle click@window->dropdown#hide" data-dropdown-target="button">
                    Import
                  </div>

                  <div class="hidden origin-top-left absolute left-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="user-menu" data-dropdown-target="menu">
                    <%= link_to "Import GeoJSON", new_admin_import_path, class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",  role: "menuitem" %>
                    <%= link_to "Import topo", new_admin_topo_path, class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",  role: "menuitem" %>
                    <%= link_to "Import problem infos", new_admin_problem_import_path, class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",  role: "menuitem" %>
                    <%= link_to "Bleau problems", admin_bleau_problems_path, class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",  role: "menuitem" %>
                  </div>
                </div>
              </div>

              <div class="flex flex-1 items-center justify-end px-2 "
                  data-controller="search" 
                  data-search-locale-value="<%= I18n.locale %>" 
                  data-search-debug-value="<%= Rails.env.production? ? "false" : "true" %>"
                  data-search-placeholder-value="<%= t('views.search.placeholder') %>"
                  data-search-clear-value="<%= t('views.search.clear') %>" 
                  data-search-cancel-value="<%= t('views.search.cancel') %>" 
                  data-search-submit-value="<%= t('views.search.submit') %>" 
                >
                  
                    <div id="autocomplete" class="hidden"></div>
                
                    <div class="w-full max-w-sm">
                      <label for="search" class="sr-only">Search</label>
                      <div class="relative">
                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                          <!-- Heroicon name: mini/magnifying-glass -->
                          <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
                          </svg>
                        </div>
                        <input data-action="click->search#open" id="search" name="search" class="block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-3 leading-5 placeholder-gray-500 focus:border-green-500 focus:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-green-500 sm:text-sm" placeholder="<%= t('views.search.placeholder') %>" type="search">
                      </div>
                    </div>
                </div>


            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

<%= render "layouts/breadcrumbs" if breadcrumbs.count > 0 %>

<%= render "flash" %>

  <main>
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
      <%= yield %>
    </div>
  </main>
</div>

  </body>
</html>
